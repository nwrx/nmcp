{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "MCPServer",
  "description": "Auto-generated derived type for MCPServerSpec via `CustomResource`",
  "type": "object",
  "required": [
    "spec"
  ],
  "properties": {
    "spec": {
      "$ref": "#/definitions/MCPServerSpec"
    },
    "status": {
      "anyOf": [
        {
          "$ref": "#/definitions/MCPServerStatus"
        },
        {
          "type": "null"
        }
      ]
    }
  },
  "definitions": {
    "Capabilities": {
      "description": "Container capabilities",
      "type": "object",
      "required": [
        "drop"
      ],
      "properties": {
        "drop": {
          "description": "Capabilities to drop",
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "Condition": {
      "type": "object",
      "required": [
        "status",
        "type"
      ],
      "properties": {
        "lastTransitionTime": {
          "type": [
            "string",
            "null"
          ],
          "format": "date-time"
        },
        "message": {
          "type": [
            "string",
            "null"
          ]
        },
        "reason": {
          "type": [
            "string",
            "null"
          ]
        },
        "status": {
          "type": "string"
        },
        "type": {
          "type": "string"
        }
      }
    },
    "CorsConfig": {
      "description": "CORS configuration",
      "type": "object",
      "required": [
        "allowOrigins"
      ],
      "properties": {
        "allowOrigins": {
          "description": "Allowed origins",
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "HttpGetProbe": {
      "description": "HTTP GET probe",
      "type": "object",
      "required": [
        "path",
        "port"
      ],
      "properties": {
        "path": {
          "description": "Path to probe",
          "type": "string"
        },
        "port": {
          "description": "Port to probe",
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "MCPServerSpec": {
      "description": "MCPServer custom resource definition",
      "type": "object",
      "required": [
        "server"
      ],
      "properties": {
        "image": {
          "description": "Container image to use",
          "default": "mcp/time:latest",
          "type": "string"
        },
        "livenessProbe": {
          "description": "Liveness probe configuration",
          "default": null,
          "anyOf": [
            {
              "$ref": "#/definitions/ProbeConfig"
            },
            {
              "type": "null"
            }
          ]
        },
        "metadata": {
          "description": "Server metadata",
          "default": {
            "capabilities": [],
            "serverType": null
          },
          "allOf": [
            {
              "$ref": "#/definitions/ServerMetadata"
            }
          ]
        },
        "networking": {
          "description": "Network configuration",
          "default": {
            "cors": null,
            "exposeExternally": false,
            "port": 0,
            "protocol": ""
          },
          "allOf": [
            {
              "$ref": "#/definitions/NetworkingConfig"
            }
          ]
        },
        "pool": {
          "description": "Reference to McpPool resource",
          "default": "",
          "type": "string"
        },
        "readinessProbe": {
          "description": "Readiness probe configuration",
          "default": null,
          "anyOf": [
            {
              "$ref": "#/definitions/ProbeConfig"
            },
            {
              "type": "null"
            }
          ]
        },
        "resources": {
          "description": "Resource requirements",
          "default": {
            "limits": null,
            "requests": null
          },
          "allOf": [
            {
              "$ref": "#/definitions/Resources"
            }
          ]
        },
        "securityContext": {
          "description": "Security context",
          "default": null,
          "anyOf": [
            {
              "$ref": "#/definitions/SecurityContext"
            },
            {
              "type": "null"
            }
          ]
        },
        "server": {
          "description": "Server command configuration",
          "allOf": [
            {
              "$ref": "#/definitions/ServerConfig"
            }
          ]
        },
        "storage": {
          "description": "Storage configuration",
          "default": {
            "ephemeral": false,
            "volumeSize": null
          },
          "allOf": [
            {
              "$ref": "#/definitions/StorageConfig"
            }
          ]
        },
        "version": {
          "description": "Server version",
          "default": "1.0.0",
          "type": "string"
        }
      }
    },
    "MCPServerStatus": {
      "description": "MCPServer status",
      "type": "object",
      "properties": {
        "conditions": {
          "description": "Status conditions",
          "default": [],
          "type": "array",
          "items": {
            "$ref": "#/definitions/Condition"
          }
        },
        "metrics": {
          "description": "Server metrics",
          "anyOf": [
            {
              "$ref": "#/definitions/ServerMetrics"
            },
            {
              "type": "null"
            }
          ]
        },
        "phase": {
          "description": "Server phase",
          "default": null,
          "type": [
            "string",
            "null"
          ]
        },
        "serverEndpoint": {
          "description": "Server endpoint URL",
          "type": [
            "string",
            "null"
          ]
        },
        "serverUuid": {
          "description": "Server UUID",
          "type": [
            "string",
            "null"
          ]
        },
        "startTime": {
          "description": "Start time",
          "type": [
            "string",
            "null"
          ],
          "format": "date-time"
        }
      }
    },
    "NetworkingConfig": {
      "description": "Network configuration",
      "type": "object",
      "properties": {
        "cors": {
          "description": "CORS configuration",
          "anyOf": [
            {
              "$ref": "#/definitions/CorsConfig"
            },
            {
              "type": "null"
            }
          ]
        },
        "exposeExternally": {
          "description": "Whether to expose externally, will either create a LoadBalancer or ClusterIP service depending on the value of this field. Keep in mind that exposing externally may incur costs.",
          "default": false,
          "type": "boolean"
        },
        "port": {
          "description": "Server port",
          "default": 8080,
          "type": "integer",
          "format": "int32"
        },
        "protocol": {
          "description": "Protocol (HTTP or HTTPS)",
          "default": "HTTP",
          "type": "string"
        }
      }
    },
    "ProbeConfig": {
      "description": "Probe configuration",
      "type": "object",
      "required": [
        "httpGet"
      ],
      "properties": {
        "httpGet": {
          "description": "HTTP get probe",
          "allOf": [
            {
              "$ref": "#/definitions/HttpGetProbe"
            }
          ]
        },
        "initialDelaySeconds": {
          "description": "Initial delay seconds",
          "default": 5,
          "type": "integer",
          "format": "int32"
        },
        "periodSeconds": {
          "description": "Period seconds",
          "default": 10,
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "ResourceQuantity": {
      "description": "Resource quantity",
      "type": "object",
      "properties": {
        "cpu": {
          "description": "CPU quantity",
          "type": [
            "string",
            "null"
          ]
        },
        "memory": {
          "description": "Memory quantity",
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "Resources": {
      "description": "Resource requirements",
      "type": "object",
      "properties": {
        "limits": {
          "description": "Resource limits",
          "default": null,
          "anyOf": [
            {
              "$ref": "#/definitions/ResourceQuantity"
            },
            {
              "type": "null"
            }
          ]
        },
        "requests": {
          "description": "Resource requests",
          "default": null,
          "anyOf": [
            {
              "$ref": "#/definitions/ResourceQuantity"
            },
            {
              "type": "null"
            }
          ]
        }
      }
    },
    "SeccompProfile": {
      "description": "Seccomp profile",
      "type": "object",
      "required": [
        "type"
      ],
      "properties": {
        "type": {
          "description": "Profile type",
          "type": "string"
        }
      }
    },
    "SecurityContext": {
      "description": "Security context",
      "type": "object",
      "properties": {
        "allowPrivilegeEscalation": {
          "description": "Allow privilege escalation",
          "default": false,
          "type": "boolean"
        },
        "capabilities": {
          "description": "Capabilities",
          "anyOf": [
            {
              "$ref": "#/definitions/Capabilities"
            },
            {
              "type": "null"
            }
          ]
        },
        "runAsNonRoot": {
          "description": "Run as non-root",
          "default": true,
          "type": "boolean"
        },
        "runAsUser": {
          "description": "Run as user ID",
          "type": [
            "integer",
            "null"
          ],
          "format": "int64"
        },
        "seccompProfile": {
          "description": "Seccomp profile",
          "anyOf": [
            {
              "$ref": "#/definitions/SeccompProfile"
            },
            {
              "type": "null"
            }
          ]
        }
      }
    },
    "ServerConfig": {
      "description": "Server command configuration",
      "type": "object",
      "required": [
        "command"
      ],
      "properties": {
        "args": {
          "description": "Command arguments",
          "default": [],
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "command": {
          "description": "Main command to execute",
          "type": "string"
        },
        "env": {
          "description": "Environment variables",
          "default": {},
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        }
      }
    },
    "ServerMetadata": {
      "description": "Server metadata",
      "type": "object",
      "properties": {
        "capabilities": {
          "description": "Server capabilities",
          "default": [],
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "serverType": {
          "description": "Server type",
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "ServerMetrics": {
      "description": "Server metrics",
      "type": "object",
      "properties": {
        "activeConnections": {
          "description": "Active connections",
          "type": [
            "integer",
            "null"
          ],
          "format": "int32"
        },
        "cpuUsage": {
          "description": "CPU usage",
          "type": [
            "string",
            "null"
          ]
        },
        "memoryUsage": {
          "description": "Memory usage",
          "type": [
            "string",
            "null"
          ]
        },
        "requestCount": {
          "description": "Request count",
          "type": [
            "integer",
            "null"
          ],
          "format": "int64"
        }
      }
    },
    "StorageConfig": {
      "description": "Storage configuration",
      "type": "object",
      "properties": {
        "ephemeral": {
          "description": "Whether storage is ephemeral",
          "default": true,
          "type": "boolean"
        },
        "volumeSize": {
          "description": "Volume size",
          "type": [
            "string",
            "null"
          ]
        }
      }
    }
  }
}
